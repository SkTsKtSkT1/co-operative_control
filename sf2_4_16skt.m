% BB(:,:,1)=[0.8 0 0.2 0 0;0 1 0 0 0;0 0 1 0 0;0 0 0 1 0;0 0 0 0 1];
% BB(:,:,2)=[1 0 0 0 0;0.2 0.8 0 0 0;0 0 1 0 0;0 0 0 1 0;0 0 0 0 1];
% BB(:,:,3)=[1 0 0 0 0;0 1 0 0 0;0.2 0 0.8 0 0;0 0 0 1 0;0 0 0 0 1];
% BB(:,:,4)=[1 0 0 0 0;0 1 0 0 0;0 0 1 0 0;0 0 0.2 0.8 0;0 0 0 0 1];
% BB(:,:,5)=[1 0 0 0 0;0 1 0 0 0;0 0 1 0 0;0 0 0 1 0;0 0 0 0.2 0.8];%离散情况的行随机矩阵
BB(:,:,1)=[-0.2 0 0.2 0 0;0 0 0 0 0;0 0 0 0 0;0 0 0 0 0;0 0 0 0 0]; %3->1 0.2
BB(:,:,2)=[0 0 0 0 0;0.8 -0.8 0 0 0;0 0 0 0 0;0 0 0 0 0;0 0 0 0 0]; % 1->2 0.8
BB(:,:,3)=[0 0 0 0 0;0 0 0 0 0;0.8 0 -0.8 0 0;0 0 0 0 0;0 0 0 0 0];%1->3 0.8
BB(:,:,4)=[0 0 0 0 0;0 0 0 0 0;0 0 0 0 0;0 0 0.2 -0.2 0;0 0 0 0 0];%3->4 0.2
BB(:,:,5)=[0 0 0 0 0;0 0 0 0 0;0 0 0 0 0;0 0 0 0 0;0 0 0 0.6 -0.6];%4->5 0.6

X=[0.2;0.4;0.6;0.8;1];
t=0:0.001:100;
for n=1:length(t)
    m=round(rand(1,1)*4)+1;
    A=BB(:,:,m);
    for i=1:size(A)
        u(i,n)=0;
        for j=1:size(A)
            %u(i,n)=u(i,n)+A(i,j)*X(j,n); 离散
            u(i,n)=u(i,n)-A(i,j)*(X(i,n)-X(j,n));  %连续
        end
        X(i,n+1)=X(i,n)+0.001*u(i,n);
    end
end
plot(t,X(1,1:length(t)),t,X(2,1:length(t)),t,X(3,1:length(t)),t,X(4,1:length(t)),t,X(5,1:length(t)));grid on
